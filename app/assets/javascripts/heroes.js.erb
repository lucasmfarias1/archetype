let state = {
  gender: 'female',
  race: 'human',
  gear: null
}

const toggleRaceModal = () => {
  const raceModal = document.querySelector('.hero-form_race-modal');
  const style = window.getComputedStyle(raceModal);
  const display = style.getPropertyValue('display');
  if (display === 'none') {
    raceModal.style.display = 'flex';
  } else {
    raceModal.style.display = 'none';
  }
}

const setRace = (race) => {
  switch (race) {
    case 'human':
      state.race = 'human';
      break;
  
    case 'elf':
      state.race = 'elf';
      break;

    case 'orc':
      state.race = 'orc';
      break;

    default:
      break;
  }
  renderHero(state);
  toggleRaceModal();
}

const deleteHero = (id) => {
  const deletedHero = document.querySelector('#hero-' + id);
  deletedHero.parentNode.removeChild(deletedHero);
}

const changeBase = (gender) => {
  switch (gender) {
    case 'male':
      state.gender = 'male';
      break;
    case 'female':
      state.gender = 'female';
      break;
  }
  renderHero(state);
}

const changeGear = (gear) => {
  switch (gear) {
    case 'heavy':
      state.gear = 'heavy';
      break;
    case 'medium':
      state.gear = 'medium';
      break;
    case 'light':
      state.gear = 'light';
      break;
  }
  renderHero(state);
}

const renderHero = (state) => {
  const heroBase = document.querySelector('.hero-form_preview_base');
  const heroGear = document.querySelector('.hero-form_preview_gear');

  switch (state.gender) {
    case 'male':
      heroBase.src="<%= asset_data_uri 'hero/base/male-elf.png' %>";
      break;
    case 'female':
      heroBase.src="<%= asset_data_uri 'hero/base/female-elf.png' %>";
      break;
  }

  switch (state.gear) {
    case 'heavy':
      if (state.gender === 'male') {
        heroGear.src="<%= asset_data_uri 'hero/gear/1/male.png' %>";
      } else if (state.gender === 'female') {
        heroGear.src="<%= asset_data_uri 'hero/gear/1/female.png' %>";
      }
      break;
    case 'medium':
      if (state.gender === 'male') {
        heroGear.src="<%= asset_data_uri 'hero/gear/2/male.png' %>";
      } else if (state.gender === 'female') {
        heroGear.src="<%= asset_data_uri 'hero/gear/2/female.png' %>";
      }
      break;
    case 'light':
      if (state.gender === 'male') {
        heroGear.src="<%= asset_data_uri 'hero/gear/3/male.png' %>";
      } else if (state.gender === 'female') {
        heroGear.src="<%= asset_data_uri 'hero/gear/3/female.png' %>";
      }
      break;
  }

  const raceDisplay = document.querySelector('.hero-form_race-display');
  switch (state.race) {
    case 'human':
      raceDisplay.src="<%= asset_data_uri 'races/human.png' %>";
      break;

    case 'elf':
      raceDisplay.src="<%= asset_data_uri 'races/elf.png' %>";
      break;

    case 'orc':
      raceDisplay.src="<%= asset_data_uri 'races/orc.png' %>";
      break;
  }
}